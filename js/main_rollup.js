!function(){"use strict";customElements.define("bb-nav-menu",class extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML=this.html_constructor(),this.querySelector("#home-button").addEventListener("pointerdown",e=>this.home_button_clicked()),this.querySelector("#favorite-button").addEventListener("pointerdown",e=>this.favorite_button_clicked())}home_button_clicked(){location.reload(!0)}favorite_button_clicked(){this.dispatchEvent(new CustomEvent("bb-favorite-button",{detail:{action:"favorite-button-clicked"},bubble:!0,composed:!0}))}html_constructor(){return'<div class="bb-nav-menu-container">\n        <div id="home-button" class="bb-home-button">HOME</div>\n        <div id="favorite-button" class="bb-favorite-button">FAVORITE</div>'}});customElements.define("bb-main-header",class extends HTMLElement{constructor(){super(),document.addEventListener("bb-favorite-button",this.handle_mbox_message.bind(this),!0),this.favorites_display="hidden"}connectedCallback(){this.innerHTML=this.html_constructor(),this.querySelector("#search-bar-input").addEventListener("input",e=>this.input_changed())}handle_mbox_message(){switch(event.detail.action){case"favorite-button-clicked":this.handle_favorite_button_clicked()}}handle_favorite_button_clicked(){"hidden"===this.favorites_display?(this.favorites_display="showing",this.querySelector("#search-bar-input").classList.remove("show-item"),this.querySelector("#search-bar-input").classList.add("hide-item"),this.querySelector("#beer-bank-title").classList.remove("show-item"),this.querySelector("#beer-bank-title").classList.add("hide-item"),this.querySelector("#beer-bank-subtitle").classList.remove("show-item"),this.querySelector("#beer-bank-subtitle").classList.add("hide-item"),this.querySelector("#favorites-list").classList.remove("hide-item"),this.querySelector("#favorites-list").classList.add("show-item"),this.querySelector("#favorites-subtitle").classList.remove("hide-item"),this.querySelector("#favorites-subtitle").classList.add("show-item")):(this.favorites_display="hidden",this.querySelector("#search-bar-input").classList.remove("hide-item"),this.querySelector("#search-bar-input").classList.add("show-item"),this.querySelector("#beer-bank-title").classList.remove("hide-item"),this.querySelector("#beer-bank-title").classList.add("show-item"),this.querySelector("#beer-bank-subtitle").classList.remove("hide-item"),this.querySelector("#beer-bank-subtitle").classList.add("show-item"),this.querySelector("#favorites-list").classList.remove("show-item"),this.querySelector("#favorites-list").classList.add("hide-item"),this.querySelector("#favorites-subtitle").classList.remove("show-item"),this.querySelector("#favorites-subtitle").classList.add("hide-item"))}input_changed(){this.dispatchEvent(new CustomEvent("bb-search-input",{detail:{input_value:this.querySelector("#search-bar-input").value.toString().toLowerCase(),action:"search"},bubble:!0,composed:!0}))}html_constructor(){return'<bb-nav-menu></bb-nav-menu>\n        <div id="beer-bank-title" class="the-beer-bank-title">The Beer Bank</div>\n        <div id="beer-bank-subtitle" class="the-beer-bank-subtitle">Find your favorite beer here</div>\n        <input type="text" id="search-bar-input" class="bb-search-bar-input" placeholder="Search for beer name" onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'Search for beer name\'">\n        <div id="favorites-list" class="bb-favorites-list hide-item">Favorites List</div>\n        <div id="favorites-subtitle" class="bb-favorites-subtitle hide-item">To add or remove items from your favorites list, please click on the star.</div>'}});customElements.define("bb-item-element",class extends HTMLElement{constructor(){super(),document.addEventListener("bb-item-element",this.handle_mbox_message.bind(this),!0),document.addEventListener("bb-item-highlight",this.item_highlight.bind(this),!0)}connectedCallback(){this.innerHTML=this.html_constructor(),this.item_id=this.getAttribute("id"),this.item_name=this.getAttribute("name"),this.item_description=this.getAttribute("description"),this.item_tagline=this.getAttribute("tagline"),this.item_food_pairing=this.getAttribute("food-pairing"),this.item_image=this.getAttribute("image-url"),this.item_ibu=this.getAttribute("ibu"),this.item_abv=this.getAttribute("abv"),this.item_ebc=this.getAttribute("ebc"),this.item_mode=this.getAttribute("mode"),this.item_selected=!1,this.check_if_favorite(),this.querySelector("#element-photo").setAttributeNS("http://www.w3.org/1999/xlink","href",this.item_image),this.querySelector("#element-name").innerHTML=this.item_name,this.querySelector("#element-tagline").innerHTML=this.item_tagline,this.querySelector("#element-favorite-button").addEventListener("pointerdown",e=>this.favorite_button_clicked()),this.querySelector("#element-container").addEventListener("pointerdown",e=>this.element_clicked())}handle_mbox_message(e){e.detail.item_id===this.item_id&&this.process_message(e)}process_message(e){switch(e.detail.action){case"added-to-favorites":this.querySelector("#svg-star").classList.remove("bb-svg-star"),this.querySelector("#svg-star").classList.add("bb-svg-star-selected");break;case"removed-from-favorites":this.querySelector("#svg-star").classList.remove("bb-svg-star-selected"),this.querySelector("#svg-star").classList.add("bb-svg-star")}}check_if_favorite(){localStorage.getItem(this.item_id)&&(this.querySelector("#svg-star").classList.remove("bb-svg-star"),this.querySelector("#svg-star").classList.add("bb-svg-star-selected"))}element_clicked(){"recommendation"!==this.item_mode&&(this.dispatchEvent(new CustomEvent("bb-item-highlight",{detail:{item_id:this.item_id,action:"element-clicked"},bubble:!0,composed:!0})),this.dispatchEvent(new CustomEvent("bb-detailed-display",{detail:{item_id:this.item_id,item_name:this.item_name,item_tagline:this.item_tagline,item_description:this.item_description,item_food_pairing:this.item_food_pairing,item_image:this.item_image,item_ibu:this.item_ibu,item_abv:this.item_abv,item_ebc:this.item_ebc,action:"element-clicked"},bubble:!0,composed:!0})))}item_highlight(){this.item_id===event.detail.item_id?!0===this.item_selected?(this.classList.remove("bb-item-element-selected"),this.classList.add("bb-item-element-normal"),this.item_selected=!1):(this.classList.remove("bb-item-element-normal"),this.classList.add("bb-item-element-selected"),this.item_selected=!0):(this.classList.remove("bb-item-element-selected"),this.classList.add("bb-item-element-normal"),this.item_selected=!1)}favorite_button_clicked(){localStorage.getItem(this.item_id)?(localStorage.removeItem(this.item_id),this.querySelector("#svg-star").classList.remove("bb-svg-star-selected"),this.querySelector("#svg-star").classList.add("bb-svg-star"),this.dispatchEvent(new CustomEvent("bb-item-element",{detail:{item_id:this.item_id,action:"removed-from-favorites"},bubble:!0,composed:!0}))):(localStorage.setItem(this.item_id,this.item_id),this.querySelector("#svg-star").classList.remove("bb-svg-star"),this.querySelector("#svg-star").classList.add("bb-svg-star-selected"),this.dispatchEvent(new CustomEvent("bb-item-element",{detail:{item_id:this.item_id,action:"added-to-favorites"},bubble:!0,composed:!0}))),this.dispatchEvent(new CustomEvent("bb-favorite-refresh",{detail:{action:"refresh-favorite-list"},bubble:!0,composed:!0}))}html_constructor(){return`\n        ${this.html_favorite_button()}\n        <div id="element-container" class="bb-element-container">\n        ${this.html_element_photo()}\n        ${this.html_element_name()}\n        ${this.html_element_tagline()}\n        </div>`}html_favorite_button(){return'<div id="element-favorite-button" class="bb-element-favorite-button"><svg id="svg-star" class="bb-svg-star" width="210mm" height="297mm" version="1.1" viewBox="0 0 210 297" xmlns="http://www.w3.org/2000/svg">\n        <path transform="rotate(.81368 -1152.9 3834)" d="m83.602 94.594-25.582-12.986-25.2 13.712 4.4448-28.343-20.829-19.73 28.329-4.5313 12.328-25.906 13.064 25.543 28.447 3.7189-20.255 20.317z"/>\n       </svg></div>\n        '}html_element_photo(){return'<div class="list-element-photo-container">\n        <svg class="svg-photo-display" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <image id="element-photo" class="submit-form-photo-display" width="100%" height="100%"/>\n        </svg>\n        </div>'}html_element_name(){return'<div id="element-name" class="bb-element-name"></div>\n        '}html_element_tagline(){return'<div id="element-tagline" class="bb-element-tagline"></div>'}});class e extends HTMLElement{constructor(){super(),document.addEventListener("bb-search-input",this.handle_mbox_message.bind(this),!0),document.addEventListener("bb-favorite-button",this.handle_mbox_message.bind(this),!0),this.page_count=1,this.search_mode=!1,this.display_status="showing"}connectedCallback(){this.innerHTML=this.html_constructor(),this.list_elements=this.querySelector("#list-elements"),this.addEventListener("scroll",e=>this.load_more()),this.get_initial_list_of_20_items()}handle_mbox_message(e){switch(e.detail.action){case"search":this.handle_search_action(e);break;case"favorite-button-clicked":this.handle_favorite_button_clicked()}}handle_favorite_button_clicked(){"showing"===this.display_status?(this.hide_element(),this.display_status="hidden"):(this.show_element(),this.display_status="showing")}hide_element(){this.classList.remove("show-item"),this.classList.add("hide-item")}show_element(){this.classList.remove("hide-item"),this.classList.add("show-item")}handle_search_action(e){""!==e.detail.input_value?(this.search_mode=!0,fetch(`https://api.punkapi.com/v2/beers?beer_name=${e.detail.input_value.toString().toLowerCase().split(" ").join("_")}`).then(function(e){return e.json()}).then(function(e){this.clear_the_list(),this.populate_list(e)}.bind(this))):(this.search_mode=!1,this.clear_the_list(),this.get_initial_list_of_20_items())}get_initial_list_of_20_items(){fetch(`https://api.punkapi.com/v2/beers?page=${this.page_count}&per_page=20`).then(function(e){return e.json()}).then(function(e){this.populate_list(e)}.bind(this))}load_more(){!this.search_mode&&Math.round(this.scrollTop+this.clientHeight)>=Math.round(this.scrollHeight)&&this.get_20_more_items()}get_20_more_items(){this.page_count++,fetch(`https://api.punkapi.com/v2/beers?page=${this.page_count}&per_page=20`).then(function(e){return e.json()}).then(function(e){this.populate_list(e)}.bind(this))}clear_the_list(){this.list_elements.innerHTML=""}populate_list(e){e.forEach(e=>{let t=document.createElement("bb-item-element");t.setAttribute("id",e.id),t.setAttribute("name",e.name),t.setAttribute("description",e.description),t.setAttribute("tagline",e.tagline),t.setAttribute("food-pairing",e.food_pairing),t.setAttribute("image-url",e.image_url),t.setAttribute("ibu",e.ibu),t.setAttribute("abv",e.abv),t.setAttribute("ebc",e.ebc),this.list_elements.appendChild(t)})}html_constructor(){return'<div id="list-container" class="bb-list-container">\n        <div id="list-elements" class="bb-list-elements">\n        </div>\n        </div>'}}customElements.define("bb-main-list-container",e);customElements.define("bb-favorites-list",class extends e{constructor(){super(),document.addEventListener("bb-favorite-refresh",this.handle_mbox_message.bind(this),!0)}connectedCallback(){this.innerHTML=this.html_constructor(),this.list_elements=this.querySelector("#list-elements"),this.display_status="hidden",this.hide_element()}handle_mbox_message(e){switch(e.detail.action){case"refresh-favorite-list":"hidden"!==this.display_status&&this.list_favorites();break;case"favorite-button-clicked":this.handle_favorite_button_clicked()}}handle_favorite_button_clicked(){"showing"===this.display_status?(this.hide_element(),this.display_status="hidden"):(this.show_element(),this.list_favorites(),this.display_status="showing")}list_favorites(){if(this.item_ids_list="",0===localStorage.length){let e=document.createElement("div");e.innerHTML="The are no favorites at the moment.",e.setAttribute("class","no-favorites-text"),this.clear_the_list(),this.querySelector("#list-elements").appendChild(e)}else{for(let e=0,t=localStorage.length;e<t;++e)this.item_ids_list+=localStorage.getItem(localStorage.key(e))+"|";fetch(`https://api.punkapi.com/v2/beers?ids=${this.item_ids_list.slice(0,-1)}`).then(function(e){return e.json()}).then(function(e){this.clear_the_list(),this.populate_list(e)}.bind(this))}}html_constructor(){return'<div id="list-container" class="bb-list-container">\n        <div id="list-elements" class="bb-list-elements">\n        </div>\n        </div>'}});customElements.define("bb-detailed-display",class extends HTMLElement{constructor(){super(),document.addEventListener("bb-detailed-display",this.display_item_details.bind(this),!0),this.hide_element(),this.display_status="hidden"}connectedCallback(){this.innerHTML=this.html_constructor(),this.list_recommendations=this.querySelector("#item-recommendations-container"),this.querySelector("#close-button").addEventListener("pointerdown",e=>this.close_button_clicked())}close_button_clicked(){this.hide_element()}display_item_details(e){"hidden"===this.display_status?this.show_element():this.hide_element(),this.querySelector("#item-name").innerHTML=e.detail.item_name,this.querySelector("#item-description").innerHTML=e.detail.item_description,this.querySelector("#item-tagline").innerHTML=e.detail.item_tagline,this.querySelector("#item-food-pairing").appendChild(this.create_list(e.detail.item_food_pairing)),this.querySelector("#element-photo").setAttributeNS("http://www.w3.org/1999/xlink","href",e.detail.item_image),this.querySelector("#item-ibu").innerHTML=e.detail.item_ibu,this.querySelector("#item-abv").innerHTML=e.detail.item_abv+"%",this.querySelector("#item-ebc").innerHTML=e.detail.item_ebc,this.provide_recommendations(e.detail.item_ebc)}create_list(e){let t=e.split(","),i=document.createElement("ul");for(let e=0;e<t.length;e++){let s=document.createElement("li");s.innerHTML=t[e],i.appendChild(s)}return i}provide_recommendations(e){this.list_recommendations.innerHTML="",fetch(`https://api.punkapi.com/v2/beers?ebc_gt=${e}&per_page=3`).then(function(e){return e.json()}).then(function(e){this.populate_list(e)}.bind(this))}populate_list(e){e.forEach(e=>{let t=document.createElement("bb-item-element");t.setAttribute("id",e.id),t.setAttribute("name",e.name),t.setAttribute("description",e.description),t.setAttribute("tagline",e.tagline),t.setAttribute("food-pairing",e.food_pairing),t.setAttribute("image-url",e.image_url),t.setAttribute("ibu",e.ibu),t.setAttribute("abv",e.abv),t.setAttribute("ebc",e.ebc),t.setAttribute("mode","recommendation"),this.list_recommendations.appendChild(t)})}hide_element(){this.classList.remove("show-item-grid"),this.classList.add("hide-item"),this.display_status="hidden"}show_element(){this.classList.remove("hide-item"),this.classList.add("show-item-grid"),this.display_status="showing"}html_constructor(){return'<div class="bb-detailed-display-shadow">\n        <div id="detailed-display-container" class="bb-detailed-display-container">\n        <div id="close-button" class="bb-detailed-display-close">✖</div>\n        <div class="bb-item-details-container">\n        <div id="item-name" class="bb-detailed-item-name"></div>\n        <div id="item-tagline" class="bb-detailed-item-tagline"></div>\n        <div class="bb-detailed-separator-line"></div>\n        <div class="bb-item-specifics">\n        <div class="bb-item-ibu-container">IBU:&nbsp;<div id="item-ibu" class="bb-detailed-item-ibu"></div></div>\n        <div class="bb-item-abv-container">ABV:&nbsp; <div id="item-abv" class="bb-detailed-item-abv"></div></div>\n        <div class="bb-item-ebc-container">EBC:&nbsp;<div id="item-ebc" class="bb-detailed-item-ebc"></div></div>\n        </div>\n        <div id="item-description" class="bb-detailed-item-description"></div>\n        <div class="detailed-display-photo-container">\n        <svg class="detailed-svg-photo-display" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <image id="element-photo" class="submit-form-photo-display" width="100%" height="100%"/>\n        </svg>\n        </div>\n        <div class="bb-best-served-with">Best served with:</div>\n        <div id="item-food-pairing" class="bb-detailed-item-food-pairing"></div>\n        </div>\n        <div class="bb-you-might-also-like">You might also like:</div>\n        <div id="item-recommendations-container" class="bb-item-recommendations-container">\n        </div>\n        </div>\n        </div>\n        '}});customElements.define("bear-bank-main",class extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML=this.html_constructor()}html_constructor(){return"<bb-main-header></bb-main-header>\n        <bb-main-list-container></bb-main-list-container>\n        <bb-favorites-list></bb-favorites-list>\n        <bb-detailed-display></bb-detailed-display>"}})}();
